generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                   Int      @id @default(autoincrement())
  email                String   @unique
  name                 String? // ì¼ë°˜ ìœ ì € ì‹¤ëª… (ê¸°ì‚¬ë‹˜ì€ Profileì˜ nickname ì‚¬ìš©)
  encryptedPassword    String?
  encryptedPhoneNumber String?
  currentRole          UserType @default(CUSTOMER)
  hasProfile           Boolean  @default(false)
  currentRegion        Region? // ì¼ë°˜ ìœ ì €ì˜ í˜„ì¬ ê±°ì£¼ ì§€ì—­ (ê²¬ì  ìš”ì²­ ì‹œ ì¶œë°œì§€ë¡œ ì‚¬ìš©)

  // ğŸš€ ê²¬ì  ì œí•œ ê´€ë¦¬ í•„ë“œë“¤
  hasActiveRequest Boolean   @default(false) // í™œì„± ìš”ì²­ ì—¬ë¶€ (í•œ ë²ˆì— í•˜ë‚˜ë§Œ)
  lastMovingDate   DateTime? // ë§ˆì§€ë§‰ ì´ì‚¬ ë‚ ì§œ (ì´ì‚¬ì¼ ì§€ë‚˜ì•¼ ìƒˆ ìš”ì²­ ê°€ëŠ¥)
  canCreateRequest Boolean   @default(true) // ìƒˆ ìš”ì²­ ìƒì„± ê°€ëŠ¥ ì—¬ë¶€

  // ğŸš€ ì‹¤ì‹œê°„ ì•Œë¦¼ ê´€ë ¨ í•„ë“œë“¤ (ì›¹ì†Œì¼“)
  isOnline       Boolean   @default(false) // ì˜¨ë¼ì¸ ìƒíƒœ
  lastOnlineAt   DateTime? // ë§ˆì§€ë§‰ ì˜¨ë¼ì¸ ì‹œê°„
  webSocketToken String? // ì›¹ì†Œì¼“ ì—°ê²° í† í°

  lastLoginAt                DateTime?
  accessToken                String?
  refreshToken               String?
  tokenExpiresAt             DateTime?
  deletedAt                  DateTime?
  createdAt                  DateTime                 @default(now())
  updatedAt                  DateTime                 @updatedAt
  actions                    Action[]
  designatedQuoteRequests    DesignatedQuoteRequest[] @relation("CustomerDesignatedRequests")
  receivedDesignatedRequests DesignatedQuoteRequest[] @relation("MoverDesignatedRequests")
  favoriteMover              Favorite[]               @relation("MoverFavorites")
  favorites                  Favorite[]               @relation("UserFavorites")
  movingRequests             MovingRequest[]
  notifications              Notification[]
  profile                    Profile?
  quotes                     Quote[]                  @relation("MoverQuotes") // ê¸°ì‚¬ë‹˜ì´ ì‘ì„±í•œ ê²¬ì ë“¤
  rejectedQuotes             Quote[]                  @relation("QuoteRejections") // ì‚¬ìš©ìê°€ ë°˜ë ¤í•œ ê²¬ì ë“¤
  receivedReviews            Review[]                 @relation("MoverReviews")
  reviews                    Review[]
  socialAccounts             SocialAccount[]
  userRoles                  UserRole[]
  userServices               UserService[] // ì¼ë°˜ ìœ ì €ê°€ ì„ íƒí•œ ì´ìš© ì„œë¹„ìŠ¤
  moverActivities            MoverActivity[]          @relation("MoverActivities") // ê¸°ì‚¬ë‹˜ì˜ í™œë™ ë‚´ì—­
  Quote                      Quote[]

  // ğŸš€ ì±„íŒ… ì‹œìŠ¤í…œ ê´€ê³„
  customerChatRooms ChatRoom[]    @relation("CustomerChatRooms")
  moverChatRooms    ChatRoom[]    @relation("MoverChatRooms")
  chatMessages      ChatMessage[]

  // ğŸš€ ì†Œì…œ ê³µìœ  ê´€ê³„
  socialShares SocialShare[]

  @@index([email])
  @@index([currentRole])
  @@index([hasProfile])
  @@index([currentRegion])
  @@index([hasActiveRequest]) // í™œì„± ìš”ì²­ ì—¬ë¶€ ì¸ë±ìŠ¤
  @@index([lastMovingDate]) // ë§ˆì§€ë§‰ ì´ì‚¬ ë‚ ì§œ ì¸ë±ìŠ¤
  @@index([isOnline]) // ì˜¨ë¼ì¸ ìƒíƒœ ì¸ë±ìŠ¤
  @@map("users")
}

model SocialAccount {
  id         Int            @id @default(autoincrement())
  provider   SocialProvider
  providerId String
  userId     Int
  createdAt  DateTime       @default(now())
  user       User           @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerId])
  @@index([userId])
  @@map("social_accounts")
}

model Profile {
  id           Int     @id @default(autoincrement())
  userId       Int     @unique
  nickname     String  @unique
  profileImage String?
  experience   Int
  introduction String
  description  String

  // ğŸš€ ìºì‹±ëœ í†µê³„ ë°ì´í„° (ì„±ëŠ¥ ìµœì í™”)
  completedCount Int       @default(0) // ì™„ë£Œëœ ì´ì‚¬ ê±´ìˆ˜
  avgRating      Float     @default(0.0) // í‰ê·  í‰ì 
  reviewCount    Int       @default(0) // ë¦¬ë·° ì´ ê°œìˆ˜
  favoriteCount  Int       @default(0) // ì°œí•œ ì‚¬ìš©ì ìˆ˜
  lastActivityAt DateTime? // ë§ˆì§€ë§‰ í™œë™ ì‹œê°„ (ì •ë ¬ìš©)

  deletedAt      DateTime?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  serviceRegions ProfileRegion[]
  serviceTypes   ProfileService[]
  user           User             @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([nickname])
  @@index([avgRating]) // í‰ì  ë†’ì€ìˆœ ì •ë ¬
  @@index([reviewCount]) // ë¦¬ë·° ë§ì€ìˆœ ì •ë ¬
  @@index([completedCount]) // í™•ì • ë§ì€ìˆœ ì •ë ¬
  @@index([experience]) // ê²½ë ¥ ë†’ì€ìˆœ ì •ë ¬
  @@index([lastActivityAt]) // ìµœê·¼ í™œë™ìˆœ ì •ë ¬
  // ğŸš€ ê¸°ì‚¬ë‹˜ ì°¾ê¸° ê²€ìƒ‰ ìµœì í™”ë¥¼ ìœ„í•œ ë³µí•© ì¸ë±ìŠ¤
  @@index([avgRating, completedCount]) // í‰ì +í™•ì •ê±´ìˆ˜ ì¡°í•© ì •ë ¬
  @@index([experience, avgRating]) // ê²½ë ¥+í‰ì  ì¡°í•© ì •ë ¬
  @@index([deletedAt, avgRating]) // ì†Œí”„íŠ¸ ì‚­ì œ + í‰ì  ì¡°í•©
  @@map("profiles")
}

model RegionInfo {
  region      Region   @id // enumì„ ì§ì ‘ PKë¡œ ì‚¬ìš©
  displayName String   @unique // í™”ë©´ í‘œì‹œìš© ì´ë¦„
  isActive    Boolean  @default(true) // ì„œë¹„ìŠ¤ ì§€ì—­ ì—¬ë¶€
  extraFee    Int? // ì¶”ê°€ ë°°ì†¡ë¹„
  description String? // ì§€ì—­ ì„¤ëª…
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([isActive])
  @@map("region_infos")
}

model Service {
  id           Int              @id @default(autoincrement())
  name         String           @unique
  description  String?
  isActive     Boolean          @default(true)
  iconUrl      String?
  profiles     ProfileService[]
  userServices UserService[] // ì¼ë°˜ ìœ ì €ê°€ ì„ íƒí•œ ì„œë¹„ìŠ¤

  @@index([isActive])
  @@map("services")
}

model ProfileRegion {
  id        Int     @id @default(autoincrement())
  profileId Int
  region    Region // enum ì§ì ‘ ì‚¬ìš© (ê´€ê³„ ì—†ì´)
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@unique([profileId, region])
  @@index([profileId])
  @@index([region])
  @@map("profile_regions")
}

model ProfileService {
  id        Int     @id @default(autoincrement())
  profileId Int
  serviceId Int
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)
  service   Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@unique([profileId, serviceId])
  @@index([profileId])
  @@index([serviceId])
  @@map("profile_services")
}

model MovingRequest {
  id                Int           @id @default(autoincrement())
  userId            Int
  movingType        MovingType
  movingDate        DateTime
  departureAddr     String
  arrivalAddr       String
  departureDetail   String?
  arrivalDetail     String?
  departureRegion   Region? // enum ì§ì ‘ ì‚¬ìš©
  arrivalRegion     Region? // enum ì§ì ‘ ì‚¬ìš©
  description       String?
  status            RequestStatus @default(ACTIVE)
  confirmedQuoteId  Int?          @unique
  estimatedDistance Float?
  floor             Int?
  hasElevator       Boolean?

  // ğŸš€ êµ¬í˜„ í¸ì˜ë¥¼ ìœ„í•œ í•„ë“œë“¤
  quoteCount Int     @default(0) // í˜„ì¬ ë°›ì€ ê²¬ì  ìˆ˜
  isUrgent   Boolean @default(false) // ê¸‰í•œ ì´ì‚¬ ì—¬ë¶€
  maxBudget  Int? // ìµœëŒ€ ì˜ˆì‚° (í•„í„°ë§ìš©)

  // ğŸš€ ê²¬ì  ì œí•œ ê´€ë¦¬ í•„ë“œë“¤
  maxQuoteCount        Int @default(8) // ìµœëŒ€ ê²¬ì  ìˆ˜ (ì¼ë°˜5+ì§€ì •3)
  designatedQuoteCount Int @default(0) // í˜„ì¬ ì§€ì • ê²¬ì  ìˆ˜
  maxDesignatedQuotes  Int @default(3) // ìµœëŒ€ ì§€ì • ê²¬ì  ìˆ˜

  // ğŸš€ ì •í™•í•œ ì£¼ì†Œ ì²˜ë¦¬ (ì¹´ì¹´ì˜¤ API ì§€ì›)
  departureZipCode   String? // ì¶œë°œì§€ ìš°í¸ë²ˆí˜¸
  arrivalZipCode     String? // ë„ì°©ì§€ ìš°í¸ë²ˆí˜¸
  departureLatitude  Float? // ì¶œë°œì§€ ìœ„ë„ (ì„ íƒì‚¬í•­)
  departureLongitude Float? // ì¶œë°œì§€ ê²½ë„ (ì„ íƒì‚¬í•­)
  arrivalLatitude    Float? // ë„ì°©ì§€ ìœ„ë„ (ì„ íƒì‚¬í•­)
  arrivalLongitude   Float? // ë„ì°©ì§€ ê²½ë„ (ì„ íƒì‚¬í•­)

  deletedAt               DateTime?
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
  designatedQuoteRequests DesignatedQuoteRequest[]
  confirmedQuote          Quote?                   @relation("ConfirmedQuote", fields: [confirmedQuoteId], references: [id])
  user                    User                     @relation(fields: [userId], references: [id], onDelete: Cascade)
  quotes                  Quote[]
  reviews                 Review[]
  moverActivities         MoverActivity[] // ê¸°ì‚¬ë‹˜ë“¤ì˜ í™œë™ ë‚´ì—­

  // ğŸš€ ì±„íŒ… ì‹œìŠ¤í…œ ê´€ê³„
  chatRoom ChatRoom?

  @@index([userId])
  @@index([status])
  @@index([movingDate])
  @@index([departureRegion])
  @@index([arrivalRegion])
  @@index([movingType]) // ì´ì‚¬ ìœ í˜•ë³„ ì¡°íšŒ
  @@index([isUrgent]) // ê¸‰í•œ ì´ì‚¬ í•„í„°ë§
  @@index([maxBudget]) // ì˜ˆì‚°ë³„ í•„í„°ë§
  @@index([quoteCount]) // ê²¬ì  ìˆ˜ ì¸ë±ìŠ¤
  @@index([designatedQuoteCount]) // ì§€ì • ê²¬ì  ìˆ˜ ì¸ë±ìŠ¤
  @@map("moving_requests")
}

model DesignatedQuoteRequest {
  id         Int                          @id @default(autoincrement())
  requestId  Int
  customerId Int
  moverId    Int
  message    String?
  status     DesignatedQuoteRequestStatus @default(PENDING)
  expiresAt  DateTime
  deletedAt  DateTime?
  createdAt  DateTime                     @default(now())
  updatedAt  DateTime                     @updatedAt
  customer   User                         @relation("CustomerDesignatedRequests", fields: [customerId], references: [id], onDelete: Cascade)
  mover      User                         @relation("MoverDesignatedRequests", fields: [moverId], references: [id], onDelete: Cascade)
  request    MovingRequest                @relation(fields: [requestId], references: [id], onDelete: Cascade)
  quote      Quote?

  @@unique([requestId, moverId])
  @@index([customerId])
  @@index([moverId])
  @@index([status])
  @@map("designated_quote_requests")
}

model Quote {
  id                       Int         @id @default(autoincrement())
  requestId                Int
  moverId                  Int
  price                    Int
  description              String
  status                   QuoteStatus @default(PENDING)
  isDesignated             Boolean     @default(false)
  designatedQuoteRequestId Int?        @unique
  validUntil               DateTime?

  // ğŸš€ êµ¬í˜„ í¸ì˜ë¥¼ ìœ„í•œ í•„ë“œë“¤
  responseTime      Int? // ì‘ë‹µ ì‹œê°„ (ë¶„ ë‹¨ìœ„)
  isReadByCustomer  Boolean @default(false) // ê³ ê°ì´ ì½ì—ˆëŠ”ì§€ ì—¬ë¶€
  workingHours      String? // ì‘ì—… ì†Œìš” ì‹œê°„ (ì˜ˆ: "4-6ì‹œê°„")
  includesPackaging Boolean @default(false) // í¬ì¥ ì„œë¹„ìŠ¤ í¬í•¨ ì—¬ë¶€
  insuranceAmount   Int? // ë³´í—˜ ê¸ˆì•¡

  // ğŸ”´ ë°˜ë ¤ ê´€ë ¨ í•„ë“œë“¤ (ë°˜ë ¤ëœ ê²¬ì  í˜ì´ì§€ ì§€ì›)
  rejectedBy      Int? // ë°˜ë ¤í•œ ì‚¬ìš©ì ID (ê³ ê° ë˜ëŠ” ê¸°ì‚¬ë‹˜)
  rejectedAt      DateTime? // ë°˜ë ¤ ë‚ ì§œ
  rejectionReason String? // ë°˜ë ¤ ì‚¬ìœ 
  rejectionNote   String? // ë°˜ë ¤ ì‹œ ì¶”ê°€ ë©”ëª¨

  deletedAt              DateTime?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  confirmedRequest       MovingRequest?          @relation("ConfirmedQuote")
  designatedQuoteRequest DesignatedQuoteRequest? @relation(fields: [designatedQuoteRequestId], references: [id])
  mover                  User                    @relation("MoverQuotes", fields: [moverId], references: [id], onDelete: Cascade)
  request                MovingRequest           @relation(fields: [requestId], references: [id], onDelete: Cascade)
  reviews                Review[]
  rejectedByUser         User?                   @relation("QuoteRejections", fields: [rejectedBy], references: [id]) // ë°˜ë ¤í•œ ì‚¬ìš©ì
  User                   User?                   @relation(fields: [userId], references: [id])
  userId                 Int?

  @@unique([requestId, moverId])
  @@index([moverId])
  @@index([status])
  @@index([createdAt])
  @@index([price]) // ê°€ê²©ë³„ ì •ë ¬
  @@index([isDesignated]) // ì§€ì •ê²¬ì  í•„í„°ë§
  @@index([validUntil]) // ë§Œë£Œì¼ ê´€ë¦¬
  @@index([rejectedBy]) // ë°˜ë ¤í•œ ì‚¬ìš©ìë³„ ì¡°íšŒ
  @@index([rejectedAt]) // ë°˜ë ¤ ë‚ ì§œë³„ ì •ë ¬
  @@map("quotes")
}

model Action {
  id            Int            @id @default(autoincrement())
  userId        Int
  type          ActionType
  entityId      Int
  entityType    String
  description   String?
  metadata      Json?
  deletedAt     DateTime?
  createdAt     DateTime       @default(now())
  user          User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  notifications Notification[]

  @@index([userId])
  @@index([type])
  @@index([entityId, entityType])
  @@index([createdAt])
  @@map("actions")
}

model Notification {
  id        Int              @id @default(autoincrement())
  userId    Int
  actionId  Int
  type      NotificationType
  title     String
  content   String
  isRead    Boolean          @default(false)
  actionUrl String?

  // ğŸš€ ì‹¤ì‹œê°„ ì•Œë¦¼ ê´€ë ¨ í•„ë“œë“¤
  isRealTime Boolean @default(true) // ì‹¤ì‹œê°„ ì•Œë¦¼ ì—¬ë¶€
  socketSent Boolean @default(false) // ì›¹ì†Œì¼“ ì „ì†¡ ì—¬ë¶€
  retryCount Int     @default(0) // ì¬ì‹œë„ íšŸìˆ˜

  deletedAt DateTime?
  createdAt DateTime  @default(now())
  action    Action    @relation(fields: [actionId], references: [id], onDelete: Cascade)
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, isRead])
  @@index([actionId])
  @@index([createdAt])
  @@index([isRealTime]) // ì‹¤ì‹œê°„ ì•Œë¦¼ ì¸ë±ìŠ¤
  @@index([socketSent]) // ì›¹ì†Œì¼“ ì „ì†¡ ìƒíƒœ ì¸ë±ìŠ¤
  @@map("notifications")
}

model Review {
  id        Int           @id @default(autoincrement())
  requestId Int
  quoteId   Int
  userId    Int
  moverId   Int
  rating    Int
  content   String
  status    ReviewStatus  @default(PENDING)
  isPublic  Boolean       @default(true)
  deletedAt DateTime?
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  mover     User          @relation("MoverReviews", fields: [moverId], references: [id], onDelete: Cascade)
  quote     Quote         @relation(fields: [quoteId], references: [id], onDelete: Cascade)
  request   MovingRequest @relation(fields: [requestId], references: [id], onDelete: Cascade)
  user      User          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([requestId, userId])
  @@index([moverId])
  @@index([rating])
  @@index([status])
  @@map("reviews")
}

model Favorite {
  id        Int      @id @default(autoincrement())
  userId    Int
  moverId   Int
  createdAt DateTime @default(now())
  mover     User     @relation("MoverFavorites", fields: [moverId], references: [id], onDelete: Cascade)
  user      User     @relation("UserFavorites", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, moverId])
  @@index([userId])
  @@index([moverId])
  @@map("favorites")
}

model UserRole {
  id        Int      @id @default(autoincrement())
  userId    Int
  role      UserType
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, role])
  @@index([userId])
  @@index([role])
  @@map("user_roles")
}

model UserService {
  id        Int     @id @default(autoincrement())
  userId    Int
  serviceId Int
  user      User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  service   Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceId])
  @@index([userId])
  @@index([serviceId])
  @@map("user_services")
}

// ğŸš€ ê¸°ì‚¬ë‹˜ì˜ ê²¬ì  ìš”ì²­ í™œë™ ì¶”ì  í…Œì´ë¸”
model MoverActivity {
  id         Int                 @id @default(autoincrement())
  moverId    Int // ê¸°ì‚¬ë‹˜ ID
  requestId  Int // ê²¬ì  ìš”ì²­ ID
  actionType MoverActionType // í™œë™ íƒ€ì… (ì¡°íšŒ, ê²¬ì  ì‘ì„±, ë°˜ë ¤ ë“±)
  status     MoverActivityStatus @default(VIEWED) // í™œë™ ìƒíƒœ
  viewedAt   DateTime? // ì¡°íšŒí•œ ì‹œê°„
  quotedAt   DateTime? // ê²¬ì  ì‘ì„±í•œ ì‹œê°„
  rejectedAt DateTime? // ë°˜ë ¤í•œ ì‹œê°„ (ê¸°ì‚¬ë‹˜ì´ ìš”ì²­ì„ ë°˜ë ¤)
  reason     String? // ë°˜ë ¤ ì‚¬ìœ 
  note       String? // ë©”ëª¨
  createdAt  DateTime            @default(now())
  updatedAt  DateTime            @updatedAt

  mover   User          @relation("MoverActivities", fields: [moverId], references: [id], onDelete: Cascade)
  request MovingRequest @relation(fields: [requestId], references: [id], onDelete: Cascade)

  @@unique([moverId, requestId]) // ê¸°ì‚¬ë‹˜ë‹¹ ìš”ì²­ë‹¹ í•˜ë‚˜ì˜ í™œë™ë§Œ
  @@index([moverId])
  @@index([requestId])
  @@index([actionType])
  @@index([status])
  @@index([viewedAt])
  @@index([quotedAt])
  @@index([rejectedAt])
  @@map("mover_activities")
}

// ğŸš€ ì±„íŒ… ì‹œìŠ¤í…œ - ê²¬ì  ìš”ì²­ë³„ ì±„íŒ…ë°©
model ChatRoom {
  id         Int      @id @default(autoincrement())
  requestId  Int      @unique // ê²¬ì  ìš”ì²­ë³„ í•˜ë‚˜ì˜ ì±„íŒ…ë°©
  customerId Int // ê³ ê° ID
  moverId    Int? // ê¸°ì‚¬ë‹˜ ID (ì§€ì • ê²¬ì ì˜ ê²½ìš°ë§Œ)
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  request  MovingRequest @relation(fields: [requestId], references: [id], onDelete: Cascade)
  customer User          @relation("CustomerChatRooms", fields: [customerId], references: [id], onDelete: Cascade)
  mover    User?         @relation("MoverChatRooms", fields: [moverId], references: [id], onDelete: Cascade)
  messages ChatMessage[]

  @@index([customerId])
  @@index([moverId])
  @@index([isActive])
  @@map("chat_rooms")
}

// ğŸš€ ì±„íŒ… ë©”ì‹œì§€
model ChatMessage {
  id          Int      @id @default(autoincrement())
  chatRoomId  Int // ì±„íŒ…ë°© ID
  senderId    Int // ë°œì‹ ì ID
  messageType String // "TEXT", "SYSTEM", "STEP_COMPLETE", "IMAGE"
  content     String // ë©”ì‹œì§€ ë‚´ìš©
  step        Int? // ê²¬ì  ìš”ì²­ ë‹¨ê³„ (ì±„íŒ…í˜• ì…ë ¥ìš©)
  metadata    Json? // ì¶”ê°€ ë°ì´í„° (ì´ë¯¸ì§€ URL, ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì •ë³´ ë“±)
  createdAt   DateTime @default(now())

  chatRoom ChatRoom @relation(fields: [chatRoomId], references: [id], onDelete: Cascade)
  sender   User     @relation(fields: [senderId], references: [id], onDelete: Cascade)

  @@index([chatRoomId])
  @@index([senderId])
  @@index([messageType])
  @@index([createdAt])
  @@map("chat_messages")
}

// ğŸš€ ì†Œì…œ ë¯¸ë””ì–´ ê³µìœ  ì¶”ì 
model SocialShare {
  id         Int      @id @default(autoincrement())
  entityType String // "MOVER_PROFILE", "QUOTE", "REVIEW"
  entityId   Int // ê³µìœ  ëŒ€ìƒ ID (ê¸°ì‚¬ë‹˜ ID, ê²¬ì  ID ë“±)
  platform   String // "FACEBOOK", "TWITTER", "KAKAO", "LINK_COPY"
  sharedBy   Int? // ê³µìœ í•œ ì‚¬ìš©ì ID (ë¡œê·¸ì¸ ì‹œ)
  ipAddress  String? // ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ì¶”ì ìš© IP
  userAgent  String? // ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì •ë³´
  createdAt  DateTime @default(now())

  user User? @relation(fields: [sharedBy], references: [id], onDelete: Cascade)

  @@index([entityType, entityId])
  @@index([platform])
  @@index([sharedBy])
  @@index([createdAt])
  @@map("social_shares")
}

enum UserType {
  CUSTOMER
  MOVER
}

enum SocialProvider {
  GOOGLE
  NAVER
  KAKAO
}

enum MovingType {
  SMALL
  HOME
  OFFICE
}

enum QuoteStatus {
  PENDING
  ACCEPTED
  REJECTED
  EXPIRED
  SENT
}

enum RequestStatus {
  ACTIVE
  CONFIRMED
  COMPLETED
  CANCELLED
  DISABLED
}

enum DesignatedQuoteRequestStatus {
  PENDING
  ACCEPTED
  REJECTED
  EXPIRED
}

enum ActionType {
  QUOTE_SUBMITTED
  QUOTE_ACCEPTED
  QUOTE_REJECTED
  DESIGNATED_QUOTE_REQUESTED
  DESIGNATED_QUOTE_SUBMITTED
  MOVING_COMPLETED
  REVIEW_SUBMITTED
}

enum NotificationType {
  NEW_QUOTE
  QUOTE_CONFIRMED
  MOVING_DAY
  NEW_REQUEST
  REVIEW_REQUEST
  QUOTE_REJECTED
  DESIGNATED_QUOTE_REQUEST
  PAYMENT_CONFIRMED
}

enum ReviewStatus {
  PENDING
  COMPLETED
  EXPIRED
}

enum MoverActionType {
  VIEWED // ê²¬ì  ìš”ì²­ ì¡°íšŒ
  QUOTED // ê²¬ì  ì‘ì„±
  REJECTED // ìš”ì²­ ë°˜ë ¤ (ê¸°ì‚¬ë‹˜ì´ ìš”ì²­ì„ ê±°ì ˆ)
  BOOKMARKED // ë¶ë§ˆí¬ (ë‚˜ì¤‘ì— ê²¬ì  ì‘ì„± ì˜ˆì •)
}

enum MoverActivityStatus {
  VIEWED // ì¡°íšŒë§Œ í•¨
  INTERESTED // ê´€ì‹¬ í‘œì‹œ
  QUOTED // ê²¬ì  ì‘ì„± ì™„ë£Œ
  REJECTED // ìš”ì²­ ë°˜ë ¤
  BOOKMARKED // ë¶ë§ˆí¬ ìƒíƒœ
}

// ğŸš€ ì§€ì—­ Enum (í•œêµ­ 17ê°œ ì‹œë„)
enum Region {
  SEOUL // ì„œìš¸íŠ¹ë³„ì‹œ
  BUSAN // ë¶€ì‚°ê´‘ì—­ì‹œ
  DAEGU // ëŒ€êµ¬ê´‘ì—­ì‹œ
  INCHEON // ì¸ì²œê´‘ì—­ì‹œ
  GWANGJU // ê´‘ì£¼ê´‘ì—­ì‹œ
  DAEJEON // ëŒ€ì „ê´‘ì—­ì‹œ
  ULSAN // ìš¸ì‚°ê´‘ì—­ì‹œ
  SEJONG // ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ
  GYEONGGI // ê²½ê¸°ë„
  CHUNGBUK // ì¶©ì²­ë¶ë„
  CHUNGNAM // ì¶©ì²­ë‚¨ë„
  JEONBUK // ì „ë¼ë¶ë„
  JEONNAM // ì „ë¼ë‚¨ë„
  GYEONGBUK // ê²½ìƒë¶ë„
  GYEONGNAM // ê²½ìƒë‚¨ë„
  GANGWON // ê°•ì›ë„
  JEJU // ì œì£¼íŠ¹ë³„ìì¹˜ë„
}
